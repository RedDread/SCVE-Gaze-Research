package uk.ac.salford.cvefm.view 
{
	import fl.motion.MatrixTransformer;
	import flash.display.MovieClip;
	import flash.display.Sprite;
	import flash.events.Event;
	import flash.events.MouseEvent;
	import flash.geom.Matrix;
	import flashandmath.as3.cards.PlayingCard;
	import uk.ac.salford.cvefm.controller.PokerDataController;
	import uk.ac.salford.cvefm.model.CardData;
	import uk.ac.salford.cvefm.model.PokerPlayerData;
	
	/**
	 * ...
	 * @author Claire Miller
	 */
	public class PlayerView extends MovieClip 
	{
		public static const PLAYER_BET:String = "PlayerView_PlayerBet";
		
		private var _data:PokerDataController; 
		
		private var _firstCard:PlayingCard;
		private var _secondCard:PlayingCard;
		private var _playerId:Number;
		
		public function PlayerView (index:Number) 
		{
			super();
			
			_data = PokerDataController.getInstance ();
			
			var playerData:PokerPlayerData = _data.getPokerPlayerData (index);
			
			var matrix:Matrix = this.transform.matrix;
			matrix.rotate(playerData.cardRotation * Math.PI / 180);
			matrix.translate(playerData.cardX, playerData.cardY);
			
			this.transform.matrix = matrix;
		}
		
		public function nextGame () :void
		{
			if (_firstCard) this.removeChild(_firstCard);
			if (_secondCard) this.removeChild(_secondCard);
			
			_firstCard = null;
			_secondCard = null;
		}
		
		public function dealTwoCards () :void
		{
			var deck:CardData = _data.getCardData ();
			
			_firstCard = deck.getNextCard ();
			_firstCard.x = 100
			this.addChild (_firstCard);
			
			_secondCard = deck.getNextCard ();
			_secondCard.x = 250;
			this.addChild (_secondCard);
		}		
	}

}