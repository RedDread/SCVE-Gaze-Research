package uk.ac.salford.cvefm.view 
{
	import flash.display.MovieClip;
	import flash.events.Event;
	import flash.geom.Matrix;
	import uk.ac.salford.cvefm.controller.PokerDataController;
	import uk.ac.salford.cvefm.model.BankData;
	/**
	 * ...
	 * @author Claire Miller
	 */
	public class BlindsClockView extends MovieClip
	{
		private var _clock:BlindsClockInstance;
		private var _bankData:BankData;
		
		public function BlindsClockView() 
		{
			this.addEventListener(Event.ADDED_TO_STAGE, initialise, false, 0, true);
		}
		
		public function initialise (event:Event) :void
		{
			_clock = new BlindsClockInstance ();
			addChild (_clock);
		
			_bankData = PokerDataController.getInstance ().getBankData();
			
			var matrix:Matrix = _clock.transform.matrix;
			matrix.rotate(_bankData.blindsRot * Math.PI / 180);
			matrix.translate(_bankData.blindsPos.x, _bankData.blindsPos.y);
			
			_clock.transform.matrix = matrix;
			
			setBlinds ();
		}
		
		public function setBlindsClock (value:String) :void
		{
			_clock.blinds_clock_text.text = value;
		}
		
		public function setBlinds () :void
		{
			_clock.small_blinds_text.text = _bankData.nextSmallBlind.toString ();
			_clock.large_blinds_text.text = _bankData.nextLargeBlind.toString ();
		}
	}

}