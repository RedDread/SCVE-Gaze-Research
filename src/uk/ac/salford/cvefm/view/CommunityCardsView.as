package uk.ac.salford.cvefm.view 
{
	import flash.display.Sprite;
	import flashandmath.as3.cards.PlayingCard;
	import uk.ac.salford.cvefm.controller.PokerDataController;
	import uk.ac.salford.cvefm.model.CardData;
	
	/**
	 * Shared Cards - Fast and loose coding as prototype, nothing fancy nothing stored
	 * @author Claire Miller
	 */
	public class CommunityCardsView extends Sprite 
	{
		private static const DELTA:Number = 100;
		
		private var _data:PokerDataController;
		private var _xpos:Number;
		private var _cards:Array;
		
		public function CommunityCardsView() 
		{
			_data = PokerDataController.getInstance ();
			
			this.x = _data.communityCardsPoint.x;
			this.y = _data.communityCardsPoint.y;
			
			_cards = new Array ();
		}
		
		public function shuffle () :void
		{			
			while (_cards.length > 0)
			{
				removeChild (_cards.pop());
			}
			
			// Shuffle the deck
			var deck:CardData = _data.getCardData ();
			deck.shuffle ();
			
		}
		
		public function flop () :void
		{
			var deck:CardData = _data.getCardData ();
			var card:PlayingCard;
			
			// Add 3 cards
			for (var i:int = 0; i < 3; i++) 
			{
				_xpos = i * DELTA;
				
				card = deck.getNextCard ();
				card.x = _xpos;
				
				this.addChild (card);	
				
				_cards.push (card);
			}
		}
		
		// Turn and the River, not really burning one though
		public function burnOneTurnOne () :void
		{
			// And another			
			var deck:CardData = _data.getCardData ();
			var card:PlayingCard = deck.getNextCard ();
			
			_xpos += DELTA;
			card.x = _xpos;
			this.addChild (card);
			
			_cards.push (card);
		}
	}

}